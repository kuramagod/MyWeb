<div class="quill-editor">
    <div id="{{ widget.attrs.id }}"></div>
    <textarea style="display:none" name="{{ widget.name }}" id="{{ widget.attrs.id }}-hidden">{{ widget.value }}</textarea>
</div>

<script src="https://cdn.quilljs.com/1.3.6/quill.min.js"></script>
<script>
    var quill = new Quill('#{{ widget.attrs.id }}', {
        theme: 'snow',
        modules: {
            toolbar: [
                [{ 'font': ['roboto', 'arial', 'times-new-roman', 'courier', 'georgia', 'verdana', 'tahoma', 'comic-sans-ms'] }],
                [{ 'header': '1'}, { 'header': '2' }],
                [{ 'list': 'ordered'}, { 'list': 'bullet' }],
                ['bold', 'italic', 'underline'],
                ['link', 'image'],
                [{ 'align': [] }],
                ['clean'],
            ]
        }
    });

    // Обновление скрытого поля с содержимым Quill
    var hiddenInput = document.getElementById('{{ widget.attrs.id }}-hidden');
    quill.on('text-change', function() {
        hiddenInput.value = quill.root.innerHTML;
    });
</script>
